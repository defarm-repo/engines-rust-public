# Railway deployment configuration
# Force Railway to use our custom Dockerfile instead of Railpack auto-detection

[build]
# Use custom Dockerfile (Railpack auto-detection disabled)
builder = "DOCKERFILE"
dockerfilePath = "config/Dockerfile"

[deploy]
# Railway sets PORT dynamically via environment variable
startCommand = "/app/defarm-api"
restartPolicyType = "ON_FAILURE"
restartPolicyMaxRetries = 3

# Health check configuration
# Railway will not route traffic until this endpoint returns 200
# Changed from /health/db to /health to avoid PostgreSQL dependency on wake-up
healthcheckPath = "/health"
healthcheckTimeout = 30
